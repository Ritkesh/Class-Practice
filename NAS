import com.hierynomus.smbj.SMBClient;
import com.hierynomus.smbj.auth.AuthenticationContext;
import com.hierynomus.smbj.connection.Connection;
import com.hierynomus.smbj.session.Session;
import com.hierynomus.smbj.share.DiskShare;
import com.hierynomus.smbj.share.File;
import com.hierynomus.smbj.share.SMB2CreateDisposition;
import com.hierynomus.smbj.share.SMB2CreateOptions;
import com.hierynomus.smbj.share.SMB2ShareAccess;
import com.hierynomus.smbj.share.AccessMask;
import com.hierynomus.smbj.share.FileAttributes;

import java.io.InputStream;
import java.util.EnumSet;

public class SmbjExample {
    public static void main(String[] args) throws Exception {
        SMBClient client = new SMBClient();

        try (Connection connection = client.connect("wn000129907")) {
            AuthenticationContext authContext = new AuthenticationContext("username", "password".toCharArray(), null);
            Session session = connection.authenticate(authContext);

            try (DiskShare share = (DiskShare) session.connectShare("DMS-TEAM")) {
                String filePath = "ocrMyPDF/sample.pdf";
                
                if (share.fileExists(filePath)) {
                    File file = share.openFile(
                        filePath,
                        EnumSet.of(AccessMask.GENERIC_READ),
                        null,
                        EnumSet.of(SMB2ShareAccess.READ),
                        FileAttributes.FILE_ATTRIBUTE_NORMAL,
                        SMB2CreateDisposition.FILE_OPEN,
                        EnumSet.noneOf(SMB2CreateOptions.class)
                    );

                    try (InputStream is = file.getInputStream()) {
                        // Read and process input stream here
                        System.out.println("File opened successfully!");
                    }
                } else {
                    System.out.println("File not found: " + filePath);
                }
            }
        }
    }
}
