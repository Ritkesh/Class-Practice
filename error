private void uploadFile(String batchId, File file) throws IOException {
    String url = "https://nuxeodev.optum.com/nuxeo/api/v1/upload/" + batchId + "/0";

    RestTemplate restTemplate = new RestTemplate();
    FileSystemResource resource = new FileSystemResource(file);

    MultiValueMap<String, Object> body = new LinkedMultiValueMap<>();
    body.add("file", resource); // Important: key must be "file"

    HttpHeaders headers = createAuthHeaders();
    headers.setContentType(MediaType.MULTIPART_FORM_DATA); // multipart, not application/pdf

    HttpEntity<MultiValueMap<String, Object>> entity = new HttpEntity<>(body, headers);

    try {
        ResponseEntity<String> response = restTemplate.exchange(url, HttpMethod.POST, entity, String.class);
        logger.info("File uploaded successfully. Response: {}", response.getBody());
    } catch (Exception e) {
        logger.error("Error uploading file to Nuxeo", e);
    }
}
