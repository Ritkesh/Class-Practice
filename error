@GetMapping("/download/{fileId}")
public ResponseEntity<byte[]> downloadFile(@PathVariable String fileId) {
    FileDocument fileDoc = fileRepository.findById(fileId).orElseThrow();

    HttpHeaders headers = new HttpHeaders();
    headers.setContentType(MediaType.parseMediaType(fileDoc.getMimeType())); // e.g., "application/pdf"
    headers.setContentDisposition(ContentDisposition.inline().filename(fileDoc.getFileName()).build());

    return new ResponseEntity<>(fileDoc.getData(), headers, HttpStatus.OK);
}
